/**
 * Mesour Modal Component - mesour.modal.js
 * @author Matous Nemec (http://mesour.com)
 */
var mesour=!mesour?{}:mesour;mesour.modal=!mesour.modal?{}:mesour.modal;(function($){var i=function(g){var h=this,modals={};function getModal(a){if(typeof a==='string'){if(!modals[a]){throw new Error('Modal "'+a+'" not exist.');}return modals[a]}return a};this.create=function(b){b.each(function(){var a=$(this),show=a.attr('data-mesour-show'),name=a.attr('data-mesour-modal');a.modal();modals[name]=a;if(show==='true'){h.show(a)}})};this.getModal=function(a){return getModal(a)};this.getBody=function(a){return getModal(a).find('[mesour-modal-body]')};this.onHide=function(a,b){a=getModal(a);a.off('hide.bs.modal.mesour-editable');return getModal(a).on('hide.bs.modal.mesour-editable',b)};this.show=function(b,c){b=getModal(b);var d=b.find('[mesour-modal-body]'),ajaxLoading=d.attr('data-ajax-loading'),isCached=d.attr('data-is-cached')==='true'?true:false;if(ajaxLoading==='false'){if(typeof c==='function'){c(b)}b.modal('show')}else{var e=d.attr('data-cache-saved');if(isCached&&e){b.modal('show')}else{var f=mesour.core.createLink(ajaxLoading,'getContent');$.get(f).complete(function(a){d.empty().append(a.responseText);d.attr('data-cache-saved','true');if(typeof c==='function'){c(b,a)}b.modal('show')})}}};this.hide=function(a){a=getModal(a);a.modal('hide');var b=a.find('[mesour-modal-body]'),ajaxLoading=b.attr('data-ajax-loading'),isCached=b.attr('data-is-cached')==='true'?true:false;if(!isCached&&ajaxLoading!=='false'){b.empty()}return a};this.toggle=function(a){return getModal(a).modal('toggle')};this.handleUpdate=function(a){return getModal(a).modal('handleUpdate')};mesour.on.ready('mesour-modal',function(){h.create($('[data-mesour-modal]'))})};mesour.core.createWidget('modal',new i())})(jQuery);
